# Research: dashboard-layout-imbalance

## Metadata
- **Feature:** dashboard-layout-imbalance (Bug #32)
- **Created:** 2026-02-17T00:00
- **Status:** research-complete
- **Researcher:** research-agent

## Feature Context
- **Description:** The Documentation Feedback and Live Activity sections on the manager dashboard have unbalanced vertical proportions, creating a visually lopsided layout.
- **Where it fits:** Manager Dashboard tab in ManagerView.tsx, the bottom grid section below KPI cards.
- **Dependencies:** None -- this is a standalone CSS/layout fix with no functional dependencies.

## Visual Evidence

Screenshot captured at `dashboard-layout-imbalance.png` in project root.

**What the screenshot shows:**
- Left column (Documentation Feedback, 2fr width): Contains a small "All caught up!" empty-state card (~150px tall) with vast whitespace below it.
- Right column (Live Activity, 1fr width): Contains a tall Activity Feed card with 10 scrollable entries (~500px+ tall), extending far below the left column content.
- The two columns share no vertical alignment -- the left column ends abruptly while the right column extends far below.

## Root Cause Analysis

### Layout Structure (ManagerView.tsx line 290)

```tsx
<div className="grid grid-cols-1 lg:grid-cols-[2fr_1fr] gap-8">
  <SuggestionsSection ... />   {/* Left: 2fr */}
  <ActivitySection ... />      {/* Right: 1fr */}
</div>
```

The grid uses `grid-cols-[2fr_1fr]` for horizontal distribution. CSS Grid naturally stretches both grid children to the height of the tallest cell (implicit `align-items: stretch`). However, the **inner content** of each cell does not fill the cell height.

### Why It Looks Unbalanced

1. **SuggestionsSection** (`src/components/manager/SuggestionsSection.tsx`):
   - Root div: `className="space-y-4"` -- no height constraints.
   - When no pending suggestions: renders a small Card with "All caught up!" (~150px).
   - When suggestions exist: renders a `space-y-3` list of SuggestionCards -- taller, but still variable height.
   - **No min-height, no flex-grow, no self-stretching.**

2. **ActivitySection** (`src/components/manager/ActivitySection.tsx`):
   - Root div: `className="space-y-3"` -- no height constraints.
   - Contains ActivityFeed which renders inside a Card with `overflow-hidden flex flex-col`.
   - ActivityFeed's scrollable content: `max-h-[400px]` -- caps at 400px but with 10 entries it fills most of that.
   - The collapsible header + scroll area creates a tall block (~450px with header).

3. **The imbalance:** When suggestions are empty (common state), left column content is ~150px tall but the right column content is ~450px tall. Even though CSS Grid stretches the grid cell backgrounds equally, the visible content creates a stark height difference. The left column has a small card floating in a large empty cell.

### Files Involved

| File | Role | Key Classes |
|------|------|-------------|
| `src/views/ManagerView.tsx:290` | Grid container | `grid grid-cols-1 lg:grid-cols-[2fr_1fr] gap-8` |
| `src/components/manager/SuggestionsSection.tsx:49` | Left column root | `space-y-4` (no height fill) |
| `src/components/manager/ActivitySection.tsx:20` | Right column root | `space-y-3` (no height fill) |
| `src/components/manager/ActivityFeed.tsx:69` | Activity card | `overflow-hidden flex flex-col` |
| `src/components/manager/ActivityFeed.tsx:95` | Scroll area | `overflow-y-auto max-h-[400px]` |

## Requirements

### Functional Requirements
- [ ] FR1: Both columns should appear visually balanced when viewed side by side (source: bug #32)
- [ ] FR2: Layout should remain responsive -- stacks on mobile (grid-cols-1), side-by-side on lg+ (source: existing behavior)
- [ ] FR3: Existing functionality of both sections must be preserved (source: regression prevention)

### Technical Requirements
- [ ] TR1: CSS-only fix using Tailwind classes -- no logic changes
- [ ] TR2: Both sections should fill available height when the other section is taller
- [ ] TR3: Activity feed should retain its `max-h-[400px]` scroll behavior so it doesn't grow unbounded
- [ ] TR4: Dark mode must continue to work correctly

### Constraints
- Tailwind CSS 3 utility classes only
- No new dependencies
- Must not break existing tests (638 passing)

## Existing Code Analysis

### Project State
- Project exists: YES
- 638 tests passing across ~30 test files

### Code to Modify

1. **`src/views/ManagerView.tsx:290`** -- The grid container div
   - Current: `<div className="grid grid-cols-1 lg:grid-cols-[2fr_1fr] gap-8">`
   - Needs: Add `items-start` or adjust children to fill height

2. **`src/components/manager/SuggestionsSection.tsx:49`** -- Root div
   - Current: `<div className="space-y-4">`
   - Needs: Height fill behavior so the empty-state card stretches

3. **`src/components/manager/ActivityFeed.tsx:69`** -- Card wrapper
   - Current: `<Card className="overflow-hidden flex flex-col">`
   - May need: `flex-1` or `h-full` to fill parent

### Code to Reuse
- Card component already supports `className` prop for arbitrary Tailwind overrides
- Existing `flex flex-col` on ActivityFeed Card is already compatible with flex-grow patterns

### Patterns to Follow
- All styling uses Tailwind utility classes inline
- Dark mode uses `dark:` prefix variants
- Components use `className` prop passthrough for customization

## Proposed Fix

### Strategy: Make Both Sections Fill Grid Cell Height

The fix uses CSS flexbox on the grid children so their inner cards stretch to fill the available height.

**Step 1: SuggestionsSection -- make it fill height**

```tsx
// SuggestionsSection.tsx line 49
// Before:
<div className="space-y-4">

// After:
<div className="space-y-4 flex flex-col">
```

And on the empty-state Card (line 61) and suggestions list (line 75):
```tsx
// Empty state card - add flex-1 to fill remaining space
<Card className="p-8 text-center flex-1 flex flex-col justify-center">

// Suggestions list - add flex-1 to fill remaining space
<div className="space-y-3 flex-1">
```

**Step 2: ActivitySection -- make it fill height**

```tsx
// ActivitySection.tsx line 20
// Before:
<div className="space-y-3">

// After:
<div className="space-y-3 flex flex-col">
```

And ensure ActivityFeed's Card gets `flex-1`:
```tsx
// ActivityFeed.tsx line 69
// Before:
<Card className="overflow-hidden flex flex-col">

// After:
<Card className="overflow-hidden flex flex-col flex-1">
```

**Step 3: Grid container -- ensure items stretch (already default)**

The grid container already has `items-stretch` as the default for CSS Grid, so no change needed on `ManagerView.tsx:290`.

### Why This Works

1. CSS Grid already stretches grid cells to match the tallest row (default `align-items: stretch`).
2. Adding `flex flex-col` to each section root makes them flex containers that fill their grid cell.
3. Adding `flex-1` to the Card elements makes them grow to fill remaining vertical space.
4. The empty-state card in SuggestionsSection will stretch to match ActivityFeed's height.
5. ActivityFeed retains its `max-h-[400px]` internal scroll, so content doesn't overflow.

### Visual Result

- When suggestions empty: The "All caught up!" card stretches vertically to match the Activity Feed height, centering its content.
- When suggestions exist: Both columns fill naturally with content, cards aligned.
- On mobile: Single column layout stacks normally (no height matching needed).

## Risk Assessment

### Technical Risks
| Risk | Impact | Likelihood | Mitigation |
|------|--------|------------|------------|
| Flex changes break existing card layouts | Low | Low | Only adding flex-col/flex-1 to specific containers, no removal of existing classes |
| Empty state card stretching looks odd | Low | Low | Using `flex flex-col justify-center` keeps content vertically centered |
| Mobile layout regresses | Low | Very Low | `grid-cols-1` on mobile means single column, flex-1 only matters in side-by-side layout |

### Complexity
- **Level:** Simple
- **Rationale:** Pure CSS/Tailwind changes to 3 files (SuggestionsSection, ActivitySection, ActivityFeed). No logic changes, no new components, no state changes. Each change is adding 1-2 Tailwind utility classes.

## Open Questions

None. The fix approach is straightforward and well-understood from the visual evidence and code analysis.

## Recommended Approach

### Implementation Strategy
CSS-only fix: add `flex flex-col` to section wrapper divs and `flex-1` to inner cards so both columns fill the grid cell height equally.

### Order of Work
1. Add `flex flex-col` to SuggestionsSection root div
2. Add `flex-1 flex flex-col justify-center` to SuggestionsSection empty-state Card
3. Add `flex-1` to SuggestionsSection suggestions list div
4. Add `flex flex-col` to ActivitySection root div
5. Add `flex-1` to ActivityFeed Card
6. Verify visually with Playwright screenshot
7. Run existing tests to confirm no regressions

### What to Defer
- Nothing. This is a simple CSS fix with no deferrable parts.

### Estimated Changes
- **Files modified:** 3 (SuggestionsSection.tsx, ActivitySection.tsx, ActivityFeed.tsx)
- **Lines changed:** ~5 lines (adding Tailwind classes)
- **New tests:** 0-2 (optional visual regression tests)

## Next Step

**All questions resolved.**
Run `/plan dashboard-layout-imbalance` to create implementation plan.
