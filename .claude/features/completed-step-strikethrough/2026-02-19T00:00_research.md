# Research: completed-step-strikethrough

## Metadata
- **Feature:** completed-step-strikethrough
- **Created:** 2026-02-19T00:00
- **Status:** research-complete
- **Researcher:** research-agent
- **Bug #:** 35 (P3 LOW)

## Feature Context

When an employee completes an onboarding step, the step description text gets a `line-through` CSS decoration, making it hard to read. Employees may need to reference completed step descriptions later (e.g., to recall instructions, links, or expert contacts). The completed state is already well-indicated by multiple other visual cues, so the strikethrough is redundant and harmful to readability.

### Where it fits
- Single component fix in `StepCard.tsx`
- No dependencies on other features
- No other features depend on this

## Requirements

### Functional Requirements
- FR1: Completed step descriptions remain fully readable (no strikethrough)
- FR2: Completed steps are still visually distinguishable from pending/stuck steps
- FR3: The fix works in both light mode and dark mode

### Technical Requirements
- TR1: `line-through` Tailwind class removed from completed step description
- TR2: Completed text color (`text-slate-500`) retained for slightly muted but readable appearance
- TR3: Existing completed step visual indicators remain intact
- TR4: Regression tests added to verify no `line-through` class on completed descriptions

## Existing Code Analysis

### Project State
- Project exists: YES
- Single file affected: `src/components/onboarding/StepCard.tsx`

### The Bug (Exact Location)

**File:** `/home/sanjay/Workspace/onboarding/src/components/onboarding/StepCard.tsx`
**Line 124-128:**
```tsx
<p
  className={`leading-relaxed mb-4 transition-colors duration-300 ${
    isCompleted
      ? 'text-slate-500 dark:text-slate-500 line-through'
      : 'text-slate-600 dark:text-slate-400'
  }`}
  aria-live="polite"
>
  {step.description}
</p>
```

The `line-through` class on line 126 applies CSS `text-decoration: line-through` to the entire step description paragraph when the step status is `'completed'`.

### Existing Completed Step Visual Indicators (Already Sufficient)

The completed state is ALREADY indicated by **6 other visual cues** -- the strikethrough is redundant:

1. **Opacity reduction** (line 51): `opacity-60` on the entire card wrapper
2. **Green left border** (line 33): `border-l-emerald-500` card border
3. **Green background tint** (line 33): `bg-emerald-50/20` / `dark:bg-emerald-950/20`
4. **Green checkmark icon** in step indicator circle (line 68-70): replaces step number with `<CheckCircle>`
5. **Green checkmark** next to title (lines 92-98): `<CheckCircle>` with `text-emerald-500`
6. **"Completed" badge** in ActionBar (line 67-69 of ActionBar.tsx): green badge with `<CheckCircle>` icon

Given these 6 indicators, removing `line-through` will NOT reduce the ability to distinguish completed steps from pending ones.

### Code to Modify

- `/home/sanjay/Workspace/onboarding/src/components/onboarding/StepCard.tsx` line 126:
  - **Remove:** `line-through` from the completed description className
  - **Keep:** `text-slate-500 dark:text-slate-500` (muted color is fine for completed state)

### Code to Add Tests

- `/home/sanjay/Workspace/onboarding/src/components/onboarding/StepCard.test.tsx`:
  - Add test: completed step description does NOT have `line-through` class
  - Add test: completed step description has muted text color (`text-slate-500`)

### Patterns to Follow
- Tailwind CSS utility classes for styling
- Vitest + React Testing Library for tests
- Test file co-located with component (`StepCard.test.tsx` already exists)

## Constraints

### Performance
- No performance impact -- this is a CSS class change only

### Platform
- Must work in light and dark modes
- Tailwind CSS 3 utility classes

### Dependencies
- None -- self-contained fix

## Risk Assessment

### Technical Risks
| Risk | Impact | Likelihood | Mitigation |
|------|--------|------------|------------|
| Removing strikethrough reduces completed visibility | Low | Very Low | 6 other visual indicators remain (opacity, green border, green bg, checkmark icon, title checkmark, Completed badge) |

### Complexity
- **Level:** Simple
- **Rationale:** Single line change (remove `line-through` from one className string), plus 1-2 regression tests

## Open Questions

No open questions -- the fix is straightforward.

## Recommended Approach

### Implementation Strategy

1. In `StepCard.tsx` line 126, remove `line-through` from the completed description className:
   ```tsx
   // Before:
   ? 'text-slate-500 dark:text-slate-500 line-through'
   // After:
   ? 'text-slate-500 dark:text-slate-500'
   ```

2. Add regression tests in `StepCard.test.tsx`:
   - Verify completed step description paragraph does NOT contain `line-through` class
   - Verify completed step description has `text-slate-500` class (muted but readable)
   - Verify pending step description has `text-slate-600` class (normal readability)

### Order of Work
1. Modify `StepCard.tsx` -- remove `line-through` (1-line change)
2. Add regression tests in `StepCard.test.tsx`
3. Run `npx vitest run` to verify all tests pass

### What to Defer
- Nothing to defer -- this is the smallest possible fix

## Affected Files Summary

| File | Change |
|------|--------|
| `src/components/onboarding/StepCard.tsx` | Remove `line-through` from line 126 |
| `src/components/onboarding/StepCard.test.tsx` | Add 2-3 regression tests for description styling |

## Next Step

Run `/plan completed-step-strikethrough` to create implementation plan.
