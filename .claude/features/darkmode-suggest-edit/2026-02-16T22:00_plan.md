# Plan: darkmode-suggest-edit

## Metadata
- **Feature:** darkmode-suggest-edit (Bug #21)
- **Created:** 2026-02-16T22:00
- **Status:** plan-complete
- **Based On:** 2026-02-16T22:00_research.md
- **Priority:** P0 CRITICAL
- **Complexity:** Simple (CSS-only, single file)

## Architecture Overview

No architectural changes. This is a pure Tailwind CSS class addition to one component.

```
ModalWrapper (already has dark mode)
  └── SuggestEditModal (ZERO dark: classes -- THIS IS THE FIX)
        ├── Description paragraph
        ├── Textarea (3-branch ternary)
        ├── Validation warning banner (amber)
        ├── Success banner (emerald)
        └── Footer (char count, cancel button, submit button)
```

The `ModalWrapper` already provides `dark:bg-slate-800` body, `dark:border-slate-700` borders, `dark:bg-slate-700` footer, and `dark:text-white` title. The problem is that SuggestEditModal's internal elements use light-only colors that clash with the dark wrapper.

## Tech Stack
- Tailwind CSS `darkMode: 'class'` (existing)
- No new dependencies

## File Structure

### New Files
| File | Purpose |
|------|---------|
| `src/components/modals/SuggestEditModal.test.tsx` | Unit tests including dark mode class verification |

### Modified Files
| File | Lines | Change |
|------|-------|--------|
| `src/components/modals/SuggestEditModal.tsx` | 66, 71, 82, 121, 128-134, 155-157, 166-168 | Add `dark:` Tailwind class variants |

## Detailed Change Specification

### SuggestEditModal.tsx -- 12 className Modifications

#### Footer Section (lines 64-112)

1. **Line 66 -- Character count text**
   - Current: `text-slate-500`
   - Add: `dark:text-slate-400`

2. **Line 71 -- Minimum chars warning**
   - Current: `text-amber-600`
   - Add: `dark:text-amber-400`

3. **Line 82 -- Cancel button**
   - Current: `text-slate-600 hover:text-slate-800 hover:bg-slate-100`
   - Add: `dark:text-slate-300 dark:hover:text-slate-100 dark:hover:bg-slate-600`

#### Body Section (lines 114-174)

4. **Line 121 -- Description paragraph**
   - Current: `text-slate-600`
   - Add: `dark:text-slate-400`

5. **Lines 128-134 -- Textarea ternary (3 branches)**
   - Branch 1 (validation warning, line 130): `border-amber-300 bg-amber-50`
     - Add: `dark:border-amber-500 dark:bg-amber-900/20`
   - Branch 2 (valid/empty, line 132): `border-slate-200`
     - Add: `dark:border-slate-600 dark:bg-slate-700 dark:text-white dark:placeholder-slate-400`
   - Branch 3 (default, line 133): `border-slate-200`
     - Add: `dark:border-slate-600 dark:bg-slate-700 dark:text-white dark:placeholder-slate-400`

6. **Line 155 -- Validation warning banner container**
   - Current: `bg-amber-50 border border-amber-200`
   - Add: `dark:bg-amber-900/20 dark:border-amber-700`

7. **Line 156 -- AlertCircle icon in warning**
   - Current: `text-amber-600`
   - Add: `dark:text-amber-400`

8. **Line 157 -- Warning text**
   - Current: `text-amber-700`
   - Add: `dark:text-amber-300`

9. **Line 166 -- Success banner container**
   - Current: `bg-emerald-50 border border-emerald-200`
   - Add: `dark:bg-emerald-900/20 dark:border-emerald-700`

10. **Line 167 -- CheckCircle icon in success**
    - Current: `text-emerald-600`
    - Add: `dark:text-emerald-400`

11. **Line 168 -- Success text**
    - Current: `text-emerald-700`
    - Add: `dark:text-emerald-300`

## Testing Strategy

### Unit Tests (new file: SuggestEditModal.test.tsx)
| # | Test | What It Verifies |
|---|------|------------------|
| 1 | Renders with required props | Component mounts without error |
| 2 | Dark mode classes present on textarea | Textarea has `dark:bg-slate-700 dark:text-white` |
| 3 | Dark mode classes present on description | Description p has `dark:text-slate-400` |
| 4 | Dark mode classes on cancel button | Cancel button has `dark:text-slate-300` |
| 5 | Validation warning shows dark classes | Warning banner has `dark:bg-amber-900/20` |
| 6 | Success banner shows dark classes | Success banner has `dark:bg-emerald-900/20` |
| 7 | Light mode classes unchanged | Original classes still present (regression) |

**Estimated: +7 tests (450 total)**

### Visual Verification (Playwright -- done by test agent)
- Open SuggestEditModal in dark mode
- Verify textarea text is visible
- Verify banners are readable
- Compare with light mode (no regression)

## Implementation Notes

### Patterns
- Follow `CreateOnboardingModal.tsx` dark mode pattern exactly
- Use `slate-` palette (not `gray-`) for consistency
- Use `/20` opacity for dark banner backgrounds
- Use `-700` for dark borders, `-300` to `-400` for dark text

### Non-Goals
- Not changing component logic, state, or behavior
- Not adding dark mode to other modals (Bugs #22-27 are separate)
- Not refactoring the textarea ternary (it has 3 branches but branches 2 and 3 are identical -- cleanup is out of scope)
- Not adding snapshot tests or visual regression tests
