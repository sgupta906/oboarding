# Research: employee-header-cleanup (Bug #30)

**Feature:** employee-header-cleanup
**Created:** 2026-02-17T05:30
**Status:** complete
**Bug Number:** #30 (`employee-selector-exposed` in STATUS.md)
**Priority:** P2 MEDIUM

---

## Bug Description

The `EmployeeHeader` component inside `EmployeeView.tsx` renders a redundant sticky header bar with its own Sign Out button and "Employee View / Active Onboarding" label. However, `App.tsx` already renders `NavBar` for ALL authenticated users (line 114), which already provides Sign Out, view switching, dark mode toggle, and branding. This causes:

1. **Duplicate Sign Out buttons** -- NavBar has one at z-30, EmployeeHeader adds another at z-20
2. **Redundant UI chrome** -- "Employee View" label in EmployeeHeader duplicates NavBar's view switcher
3. **Wasted vertical space** -- Two 64px sticky headers stack on top of each other

Additionally, `OnboardingHub.tsx` has a Sign Out button inside the "no onboarding assigned yet" early return card (lines 217-223), which is also redundant since NavBar is always visible for authenticated users.

## Root Cause Analysis

### EmployeeHeader in EmployeeView.tsx (lines 29-68)

`EmployeeHeader` is a standalone function component defined inside `EmployeeView.tsx`. It was likely created before NavBar was made universal for all authenticated users. After NavBar was added to App.tsx for all roles, EmployeeHeader became redundant. It is:
- Only referenced twice: definition (line 29) and usage (line 106)
- Not exported -- internal to the file
- Imports `LogOut` and `Shield` from lucide-react solely for this header

### Sign Out button in OnboardingHub.tsx (lines 217-223)

The "no onboarding assigned" early-return card includes a Sign Out button. This card renders inside the `<OnboardingHub>` component, which is always wrapped by NavBar in App.tsx. The Sign Out button is redundant because NavBar already provides sign-out functionality.

## Verification of NavBar Coverage

Confirmed that NavBar renders for ALL authenticated users in App.tsx:
- Line 114: `<NavBar currentView={currentView} onViewChange={setCurrentView} />`
- NavBar provides: branding, view switcher (for managers), "Employee View Only" indicator (for employees), dark mode toggle, and Sign Out button
- NavBar is `sticky top-0 z-30` -- higher z-index than EmployeeHeader's z-20

## Files Affected

### Files to Modify

1. **`src/views/EmployeeView.tsx`**
   - Delete `EmployeeHeader` function component (lines 29-68, ~40 lines)
   - Remove `<EmployeeHeader />` from JSX (line 106)
   - Remove unused `LogOut` and `Shield` imports from lucide-react (line 7)
   - Keep `useMemo` import (still used for progress calculation)

2. **`src/components/OnboardingHub.tsx`**
   - Remove Sign Out button from "no onboarding assigned" card (lines 217-223, ~7 lines)
   - Remove `LogOut` from lucide-react import (line 12) -- `User` must stay (used line 209)

### Files NOT to Modify

- `src/App.tsx` -- NavBar rendering is already correct
- `src/components/ui/NavBar.tsx` -- already provides full navigation for all roles
- `src/components/onboarding/EmployeeSelector.tsx` -- correctly gated behind `isManager && currentView === 'employee'`

## Test Impact

### Existing Tests: No Breakage Expected

- `src/views/EmployeeView.test.tsx` (13 tests) -- does NOT reference EmployeeHeader, Sign Out, LogOut, or Shield. All tests exercise EmployeeView props (steps, progress, readOnly, suggestions). No changes needed.
- No test file exists for OnboardingHub.

### New Tests to Add

- 1 test: EmployeeView does NOT render a sign-out button (regression guard)
- 1 test: EmployeeView does NOT render "Employee View" / "Active Onboarding" labels (regression guard)

## Scope

- ~47 lines deleted, 0 lines added (plus ~2 new test cases)
- No new dependencies
- No database changes
- No behavioral changes -- only redundant UI removal

## Risks

- **Low risk:** The removed elements are purely redundant. NavBar is confirmed to already provide all functionality.
- **No functional impact:** Sign Out was just `window.location.hash = '#/sign-out'` -- same as NavBar's implementation.

## Recommendations

1. Simple deletion-only change -- no architectural considerations needed
2. Add regression tests to prevent re-introduction of duplicate headers
3. Verify visually with Playwright that employee view shows only NavBar header, not double headers
