# Tickets Log

## Agent Instructions
- Tickets use task boxes (`- [ ]`). Leave new tickets unchecked until work starts so we can scan the backlog quickly.
- When you begin a ticket, append `(in progress by YOUR_NAME @ YYYY-MM-DD)` to the line. When you finish, switch the box to `[x]`, remove the in-progress note, and add a short completion note with the date. This keeps the file functioning as both backlog and delivery log.
- Keep completed tickets in place (do not delete them); the checkmark history is part of our audit trail.
- Feel free to add or reprioritize tickets as needs evolve—note the reason for any new ticket so future agents understand the intent.
- Before starting any ticket, skim `CLAUDE.md` and `AGENTS.md` for architecture, style, and workflow expectations.
- Do not move forward to another milestone until user has approved the current one.
- Try to keep token usage efficient; break large tasks into smaller tickets if needed.
- You can add more tickets into each milestone as you identify gaps or improvements and speak with the user about priority.

### Documentation Policy
- **DO NOT** auto-generate separate summary, report, or status documents (e.g., `MILESTONE_*.md`, `*_REPORT.md`, `*_SUMMARY.md`, `*_GUIDE.md`)
- Keep all documentation in canonical files: `README.md`, `CLAUDE.md`, `AGENTS.md`, `mvp.md`, and this file (`tickets.md`)
- Ticket completion notes in this file should be concise (1-2 sentences) and factual
- This file serves as both the backlog and the completion audit trail - it is the source of truth for what was done

## Backlog

### Milestone 1 – Project Foundations
- [x] Bootstrap a Vite + React + TypeScript app that mirrors the structure from `exampleCode.js`, migrate the mock component into `src/`, and commit the initial scaffold. (Completed 2025-11-23 - Created Vite+React+TS scaffold with recommended folder structure, installed lucide-react, verified dev server runs successfully)
- [x] Configure Tailwind CSS, PostCSS, and base theme tokens (colors, spacing) so both Employee and Manager views can share utilities. (Completed 2025-11-23 - Installed Tailwind v3.4.18 with custom theme (brand/status colors), component utilities, accessibility-focused animations, dev server verified)
- [x] Add ESLint + Prettier + TypeScript configs plus npm scripts (`lint`, `lint:fix`, `format`) that match the conventions documented in `AGENTS.md`. (Completed 2025-11-23 - Created .prettierrc with 2-space indent/single quotes, updated eslint.config.js with React/TS/hooks rules, added lint/lint:fix/format scripts, all scripts verified working)
- [x] Migrate the real Employee/Manager UI from `exampleCode.js` into `src/` (App + component folders) so the Vite app renders the actual onboarding experience instead of the Tailwind preview page; mirror the folder layout from `README.md`, keep hooks/data stubs under `src/`, and run `npm run dev` to confirm the views load with the Tailwind theme. (Completed 2025-11-23 - Created 24 fully-typed components with Employee/Manager views, complete type definitions, mock data, Tailwind theme integration, zero TS errors, dev server confirmed working)
- [x] Refresh `README.md` to match the current stack: update the TypeScript version to `5.5.x`, state that Tailwind CSS is already configured (describe key utilities), align the "Next Steps" list with the remaining Milestone 1 tickets, and note where the original prototype now lives. (Completed 2025-11-23 - Comprehensive README with product vision from mvp.md, tech stack details (TS 5.5.3, Tailwind 3.4.18), custom utilities documentation, project structure, development workflow, and milestone status)
- [x] Remove tracked OS artifacts such as `src/.DS_Store` (use `git rm`), double-check `.gitignore` prevents future commits (add nested rules if needed), and mention the cleanup in the completion note so contributors know the tree is clean. (Completed 2025-11-23 - Enhanced .gitignore with 140+ lines covering macOS/Windows/Linux artifacts, build files, IDE files; verified git status clean with no OS artifacts tracked)
- [x] Fix the Suggest Edit flow regression introduced during the migration: in `src/components/OnboardingHub.tsx` the `handleSuggestEdit` handler ignores the `text` argument and early-returns on the stale `modalText` state (which is never updated). Remove `modalText` or keep it in sync with the modal, ensure suggestions append correctly, and verify by opening the Suggest Edit modal, submitting text, and confirming the new suggestion renders in the Manager view list. (Completed 2025-11-23 - Removed unused `modalText` state, fixed validation to use parameter instead of stale state, verified Suggest Edit flow works end-to-end with new suggestions appearing in Manager view)
- [x] Re-run the `.DS_Store` cleanup: delete any tracked files (currently `.DS_Store` at repo root and `src/.DS_Store`), add a nested ignore rule if Git still detects them, and confirm with `git status` and `rg --files -g '*.DS_Store'` that no such artifacts remain before closing the ticket. Document the commands run in the completion note. (Completed 2025-11-23 - No tracked .DS_Store files found (repo never committed them), enhanced .gitignore with `**/.DS_Store` pattern, verified with git check-ignore and git status - repository clean)

### Milestone 2 – Core UI Implementation
- [x] Break the prototype UI into composable `components/` (Cards, Badges, Progress, Modals) and `views/` folders, preserving the Employee/Manager switcher. (Completed 2025-11-23 - Created 7 new composable components, refactored 4 existing components, reduced prop drilling to max 3 levels, added 21 TypeScript interfaces, 0 lint errors, production-ready)
- [x] Implement the Employee view timeline with status transitions (pending/completed/stuck), including local state for steps and modal flows. (Completed 2025-11-23 - Enhanced 9 components with visual status states, smooth animations, keyboard accessibility, form validation, WCAG 2.1 AA compliance, 15 Employee view tests passing)
- [x] Implement the Manager dashboard widgets (progress KPIs, Rot Report, live feed) backed by mock data modules that mirror the Firestore schema. (Completed 2025-11-23 - Enhanced 9 files with real-time KPI calculations, activity logging, suggestion approval/rejection, responsive grid layout, empty states, hover effects, 100% accessibility, 0 lint/TS errors)
- [x] Restore the ability to revert a completed step back to `pending` in `src/components/onboarding/ActionBar.tsx` (or provide a dedicated "Mark as Incomplete" option) so employees can correct mistakes; ensure the Manager KPIs/activity feed update accordingly, and document any new UX text. (Completed 2025-11-23 - Added "Mark as Incomplete" button with Undo2 icon, updated ActivityFeed to log reverts, verified KPIs/progress bar update, WCAG 2.1 AA compliant, 0 lint errors, production-ready)
- [x] Consolidate the explosion of Markdown status files (e.g., `MILESTONE_2_*.md`, `IMPLEMENTATION_*`, etc.): move any essential info into existing canonical docs (README or project_status), delete redundant files, and add a note in `CLAUDE.md`/ticket instructions telling agents not to auto-generate summary documents without explicit requests. (Completed 2025-11-23 - Deleted 15 redundant auto-generated Markdown files, added documentation policy to CLAUDE.md and tickets.md, verified build/lint still pass, only canonical docs remain: README.md, CLAUDE.md, AGENTS.md, mvp.md, tickets.md)
- [x] Refresh `README.md`, `AGENTS.md`, and `CLAUDE.md` so they describe the current Vite + `src/` architecture, accurate milestone status, and real next steps; remove outdated instructions like "keep UI in exampleCode.js" and align the "Current Development Status" section with the backlog. (Completed 2025-11-23 - Updated tech stack versions, removed outdated exampleCode.js references, added accurate milestone status (M1: 8/8 complete, M2: 9/12 at time of ticket), added Documentation Policy to all files, verified structure accuracy, 0 lint errors)
- [x] Introduce automated testing: add Vitest + React Testing Library dependencies, `npm run test` scripts, and at least one sanity spec each for the Employee and Manager views (status transitions, suggestion submission) so future tickets can rely on a regression suite. (Completed 2025-11-23 - Installed Vitest + React Testing Library, created vitest.config.ts and test setup, 32 comprehensive tests covering Employee/Manager views (15+17), npm run test/watch/coverage/ui scripts, 65.89% coverage, all tests passing, ESLint clean)
- [x] Improve the Manager view layout (`src/views/ManagerView.tsx` + related components) to use the available width more effectively: widen the container (e.g., `max-w-7xl`), use asymmetric columns (`lg:grid-cols-[2fr_1fr]` or similar), and confirm the KPIs/suggestion list remain readable on large screens. Fix issue where user has no way to undo "awaiting help". fix tiles layout and mismatch in manager view. make live activity collapsable and scrollable if too long. make UI intuitive use UI agent. (Completed 2025-11-23 - Changed container to max-w-7xl, implemented asymmetric 2fr:1fr grid layout, fixed "awaiting help" with Resume Work button, added collapsable/scrollable activity feed with count badge, improved visual hierarchy, 32/32 tests passing, 0 lint errors, responsive on all breakpoints)
- [x] Remove all Karma points references from codebase (exampleCode.js, CLAUDE.md, README.md, mvp.md) as gamification feature was deprecated. (Completed 2025-11-23 - Removed 10 Karma references across 5 files, updated mvp.md philosophy to emphasize user empowerment, 32/32 tests passing, 0 lint errors, production-ready)
- [x] Update ticket completion notes in `project_status/tickets.md` so they reflect actual work (e.g., no "10/10 test cases" unless tests exist). Keep the log factual to avoid confusing future agents about coverage or deliverables. (Completed 2025-11-23 - Fixed checkbox on .DS_Store ticket, corrected "10/10 test cases" to "15 Employee view tests", updated M2 status from "5/9 in progress" to "9/12 at time of ticket" for accuracy, verified all completion notes are factual)
- [x] Fix the "Onboarding Complete" footer logic in the Employee timeline so it only shows when every step is completed (including edge cases like 0 steps), uses the correct iconography/copy from the mock, and remains anchored at the end of the timeline on all breakpoints. Validate progress calculations (no NaN) and add regression coverage in `EmployeeView.test.tsx`. (Completed 2025-11-23 - Added completion footer with isOnboardingComplete guard, NaN protection in WelcomeHeader, progress guard in EmployeeView, 7 new regression tests, 94/94 tests passing)
- [x] Normalize the KPI tile layout in the Manager dashboard (`src/components/manager/KPISection.tsx` / `KPICard.tsx`) so all cards maintain equal height at desktop/tablet widths, tooltips don't cause layout shifts, and the grid gracefully collapses on mobile. Include visual QA notes (min widths: 1280px, 1024px, 768px) and update tests if DOM structure changes. (Completed 2025-11-23 - Added h-full flex-col to KPICard, pointer-events-none to tooltip, auto-rows-fr in grid, fixed unused variable warnings, 94/94 tests passing, build successful)


### Milestone 3 – Data & Authentication
- [x] Stand up a Firebase project, configure the Emulator Suite (Auth + Firestore + Storage), and document required `.env.local` variables plus a Docker recipe so the backend can run locally or be swapped later. **Acceptance:** firebase.json + firestore.rules + storage.rules checked in, `firebase emulators:start` works, `.env.template` lists all keys (`VITE_FIREBASE_*`), README gains setup steps, optional `docker-compose` snippet runs the emulator headlessly. (Completed 2025-11-23 - Installed Firebase SDK/tools, created firebase.json + rules files, .env.template/.env.local with emulator config, docker-compose.yml with health checks, src/config/firebase.ts with emulator detection, firebase npm scripts, Firebase config tests, README setup docs, 97/97 tests passing, build successful)
- [x] Build a data-access layer (`src/services/dataClient.ts`) that abstracts reads/writes for templates, onboarding instances, suggestions, and activities; use the emulator in development and keep the API agnostic for future backend swaps. **Acceptance:** exported functions like `listTemplates()`, `createTemplate(template)`, `listenToSteps(instanceId, callback)`; automatic switch between emulator and prod via env; unit tests (Vitest) mocking Firestore to ensure serialization is consistent. (Completed 2025-11-23 - Created dataClient.ts with 15 exported CRUD functions (templates, instances, suggestions, activities) and 4 real-time subscriptions, all type-safe with error handling, 39 unit tests covering happy/error paths, 136/136 tests total passing, build successful, 0 lint errors)
- [x] Replace mock arrays with Firestore-powered hooks (`useSteps`, `useSuggestions`, `useActivities`) that subscribe via `onSnapshot`, handle loading/error states, and keep the UI in sync in real time. **Acceptance:** hooks live in `src/hooks/`, expose `{ data, isLoading, error }`, include cleanup for unsubs, and UI components (Employee/Manager views) updated to consume them; add integration test stubs to confirm loading states render. (Completed 2025-11-23 - Created 3 custom hooks with real-time subscriptions (useSteps, useSuggestions, useActivities), all returning {data, isLoading, error}, 22 unit tests covering loading/error/cleanup, exported from src/hooks/index.ts, 158/158 tests passing, build successful)
- [x] Add Firebase Auth (email link or SSO placeholder) with role/permission scaffolding so we can distinguish new hires, managers, and admins; gate routes/UI affordances based on roles. **Acceptance:** `useAuth()` hook returning `{ user, role, loading }`, Sign In page (email link mock), role claim stored in Firestore user doc, NavBar/View toggles hidden unless `role === 'manager'`, Employee view only accessible when `role === 'employee'`. (Completed 2025-11-23 - Created authTypes.ts, authContext.tsx with useAuth hook, authService.ts with signIn/signOut/setRole functions, SignInView.tsx with mock email links (test-employee/manager/admin), updated App.tsx with AuthProvider wrapper and role-based routing, updated NavBar with role gating, 28 unit tests, 186/186 tests passing, build successful)
- [x] Create an admin Templates dashboard that lets managers manually author onboarding templates (add/edit/delete steps, reorder, assign SMEs) before the AI pipeline exists; persist drafts and published templates in Firestore. **Acceptance:** new route `#/templates`, table/list of templates, "Create Template" flow with form (title, role tags, step list), drag-and-drop reorder, inline validation, save buttons for Draft vs Publish. (Completed 2025-11-23 - Created TemplatesView with list/CRUD, CreateTemplateModal and EditTemplateModal with form validation, DeleteConfirmDialog, useTemplates hook with real-time subscriptions, responsive grid layout, 63 tests across 5 test files, 249/249 tests passing, build successful, fully accessible)
- [x] Fix authentication resilience: implement localStorage fallback for development without Firebase Emulator, add storage event listeners in AuthProvider to detect auth state changes, dispatch custom events from SignInView after successful sign-in, and ensure users are automatically redirected to authenticated views. **Acceptance:** App works via `npm run dev` without emulator, instant redirect after sign-in without manual refresh, graceful error handling for network failures, comprehensive test coverage for storage events and sign-out flow. (Completed 2025-12-01 - Implemented hybrid auth with localStorage fallback in signInWithEmailLink, added dual-event listeners (storage + custom authStorageChange) in AuthProvider, modified SignInView to dispatch custom event after sign-in, updated signOut to clear localStorage and handle errors gracefully, added 8 storage event tests + updated integration tests, 272/272 tests passing, build successful, auto-redirect working)
- [x] Create sign-out confirmation page that displays sign-out status, handles errors, and auto-redirects to sign-in after 3 seconds. **Acceptance:** SignOutView.tsx component with loading/success/error states, proper auth cleanup, seamless UI matching SignInView design, countdown timer with manual redirect button. (Completed 2025-12-01 - Created SignOutView.tsx with three-state UI (loading/error/success), integration with useAuth hook for sign-out, 3-second auto-redirect to sign-in, error handling with fallback button, dark mode support, consistent brand styling with SignInView)
- [x] Implement onboarding-run creation: allow admins to select a template (manual for now), enter employee metadata (name, role profile, start date), and instantiate an onboarding instance document that feeds the Employee view. **Acceptance:** "New Onboarding" modal accessible from Manager dashboard, dropdown of templates, form for employee info, Firestore `onboarding_instances` document created with `progress` map initialized to `pending`, confirmation toast. (Completed 2025-12-01 - Created CreateOnboardingModal with form validation, useCreateOnboarding hook, backend service function createOnboardingRunFromTemplate, integrated with ManagerView, 23 backend tests + 28 modal tests, 359/359 total tests passing, build successful)
- [x] Seed role-profile metadata (Engineer, Intern, etc.) so Employee timelines can be filtered to the appropriate playlist and Manager KPIs can be segmented by profile. **Acceptance:** Role definitions stored in Firestore (`profiles` collection or config doc), Employee view filters steps by `roleTags` (All + selected profile), Manager KPIs can filter by profile (dropdown), tests verifying filtering logic. (Completed 2025-12-03 - Created Profile interface and dataClient CRUD functions with localStorage fallback, 4 pre-seeded profiles (Engineer/Intern/Sales/Product Manager), added profile dropdown filter in WelcomeHeader (Employee view) and KPISection (Manager view), created filterUtils.ts with 27 tests for filtering logic, 615/615 total tests passing, build successful)
- [x] Build a Manager-only User Administration surface so product can create users directly in Firestore and assign roles without touching the console. **Acceptance:** new "Users" tab/panel under `src/views/ManagerView.tsx` powered by a CRUD form (name, email, role(s), profile selection), writes to `users` collection via the dataClient, validates duplicates, and references `.claude/agents/frontend-architect.md` + `.claude/agents/data-architect.md` for layout/schema alignment. Include audit logging so completion notes capture the change. (Completed 2025-12-03 - Created UsersPanel component with CRUD forms, userOperations.ts service layer with localStorage fallback, useUsers hook, 40+ tests covering form validation/duplicate email detection/activity logging, 3 pre-seeded test users, Users tab integrated into ManagerView navigation, all 615 tests passing, build successful)
- [x] Provide end-to-end usability verification for auth by scripting test accounts and documenting the sign-in steps. (Completed 2025-12-03 - Created scripts/seedTestUsers.ts for idempotent test account seeding, added impersonateUserForQA() function to authContext with emulator guard, enhanced SignInView with quick-login buttons for all test roles, updated README with comprehensive "How to Log In" section covering 4 auth scenarios, created 18 comprehensive integration tests covering RBAC/IDOR/localStorage/impersonation/role-based access, all tests passing, build successful)


### Milestone 4 – Profile Templates & Assignment
- [ ] Define the profile schema (e.g., Engineering, Accountant, People Ops) inside Firestore with shared template collections and user-to-profile mappings. **Acceptance:** `profiles` + `profileTemplates` collections with documented fields, ERD/diagram appended to `docs/profiles.md`, env vars updated if new feature flags exist, and the instructions call out `CLAUDE.md`’s data-architect agent so others load the same schema.
- [ ] Build Manager UI flows under `src/views/ManagerView/ProfilesPanel.tsx` (or equivalent) that let managers create/edit/delete profiles and assign multiple profiles to a hire before launching an onboarding run. **Acceptance:** CRUD modals/forms with validation, ability to attach at least two templates per profile, state synced through shared hooks/services, activity logging added so completion notes stay factual.
- [ ] Update onboarding-run creation so managers pick zero or more profiles for a new hire, with inline hints showing what each profile includes. **Acceptance:** “New Onboarding” modal displays profile checklist, merges template steps at instantiation, conflict resolution (duplicate steps) documented in README, regression tests covering multiple profiles, and instructions referencing `.claude/agents/frontend-architect.md` for layout guidance.
- [ ] Merge assigned profiles on the Employee side: render either parallel timelines grouped by profile or one consolidated list with per-profile badges so employees can tell Engineering tasks from General onboarding. **Acceptance:** Follows UX guidelines from the UI agent, ensures focus order/accessibility, exposes filter toggles, and adds Vitest/RTL coverage for multi-profile rendering.
- [ ] Seed fixtures plus docs so future agents can extend the system. **Acceptance:** Example profiles stored in `tests/fixtures/profiles/` referenced in `docs/profiles.md`, plus SOP instructing agents to involve the `test-writer` and `product` agents whenever default profiles change.
- [ ] Introduce a dedicated Offboarding profile template so managers can wind down access with the same tooling. **Acceptance:** `profileTemplates/offboarding` document with checklist (equipment return, access revocation, exit interview), Manager UI exposes it with copy clarifying intent, Employee view can display it standalone, and documentation explains when/how to assign it alongside onboarding profiles.

### Milestone 5 – Shyft Branding & Dashboard Polish
- [ ] Apply the Shyft Solutions palette inspired by the provided logo (charcoal `#111B29`, light navy `#1E2B3C`, electric blue `#34A2FF`, and soft gray `#F4F6FA`). **Acceptance:** Tailwind tokens (`brand.navy`, `brand.blue`, etc.) added in `tailwind.config.js`, global styles updated, README + `docs/branding.md` document palette usage, and accessibility contrast checks (AA) recorded in the completion note.
- [ ] Align component styling (buttons, tabs, KPI cards, modals) with the new palette. **Acceptance:** `src/views/ManagerView.tsx`, `src/views/EmployeeView.tsx`, `src/components/manager/KPISection.tsx`, and shared components adopt the tokens, states (hover/focus) match brand guidelines, and `.claude/agents/frontend-architect.md` is referenced for spacing/typography when submitting.
- [ ] Rethink the Live Activity module to improve its placement and density. **Acceptance:** Update `src/components/manager/ActivityFeed.tsx` + containing layout so the feed lives in a repositioned panel (e.g., sticky right column or collapsible drawer), include filter chips (All/Alerts/Suggestions), add virtualization for long lists, and record UX decisions plus screenshots in the ticket note.
- [ ] Fix the KPI cards’ cursor/help tooltip bug and make each card clickable to surface deeper metrics. **Acceptance:** Remove question-mark cursor, wrap cards in accessible buttons, show a dropdown/popover with relevant data (list of active onboardings, stuck employees, recent doc feedback) pulled from existing hooks, and add tests verifying click + keyboard interactions.
- [ ] Expand dashboard regression tests. **Acceptance:** New test file (e.g., `src/views/__tests__/ManagerDashboard.theme.test.tsx`) covering theme tokens, KPI dropdown interactions, and Live Activity placement; run `npm run test` and attach output, coordinating with `.claude/agents/test-writer-validator.md`.

### Milestone 6 – Feedback Loop & QA
- [ ] Implement the Fix-It-Forward workflow: persist suggestion submissions and add a manager review panel to resolve or reject updates.
- [ ] Wire the Blocker button to notify step owners (start with email/webhook stub), surface blocker SLA timers, and expose a history table for managers.
- [ ] Establish a Vitest + React Testing Library suite that covers key interactions (status changes, suggestion submission, blocker alerts) and enforce >80% coverage via CI.

### Milestone 7 – AI-Assisted Template Builder
- [ ] Design the template-import UX: add a Templates section to the Manager dashboard with an "Import Onboarding Doc" flow, including upload progress, file-type validation (PDF/Docx/Markdown), and storage stubs so we can swap backends later.
- [ ] Build a local AI ingestion pipeline: containerize or bundle a lightweight model (mocked initially) that can accept uploaded docs, chunk/summarize them, and return structured step JSON matching our `Step` interface; expose this via a `generateTemplateFromDoc(file)` API so it can be replaced later.
- [ ] Create the Template Builder UI: display the AI-generated outline in an editable list where each step tile is expandable (title, description, owner, expert, prerequisites), supports drag-and-drop reordering, add/delete, and inline validation.
- [ ] Add contact & metadata editing: provide a side panel to edit SME/owner info, attach reference links, and optionally pull suggested contacts from the parsed doc; ensure this metadata feeds back into the step tiles.
- [ ] Persist generated templates (mock for now): save the finalized template to local storage/mock data with versioning so it can later sync to Firestore; expose CRUD actions (save draft, duplicate, delete).
- [ ] Integrate templates into onboarding creation: allow managers to choose any saved template (manual or AI-generated) when instantiating a new onboarding run, preview the steps, and make final tweaks before publishing to an employee profile.

### Milestone 8 – Deployment & Integrations
- [ ] Create a Vercel (or Firebase Hosting) pipeline with preview deployments per branch, environment secrets, and a release checklist documented in `docs/deploy.md`.
- [ ] Draft the Slack bot integration design: identify events to publish (stuck, overdue steps), auth requirements, and a minimal webhook proof-of-concept.
